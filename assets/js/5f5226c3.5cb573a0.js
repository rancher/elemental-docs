"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[1790],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),p=r,f=m["".concat(d,".").concat(p)]||m[p]||u[p]||o;return n?a.createElement(f,i(i({ref:t},c),{},{components:n})):a.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[m]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},544:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var a=n(7462),r=(n(7294),n(3905)),o=n(2957);const i={sidebar_label:"Trusted Platform Module (TPM)",title:""},l="Trusted Platform Module 2.0 (TPM)",d={unversionedId:"tpm",id:"version-Stable/tpm",title:"",description:"Trusted Platform Module (TPM, also known as ISO/IEC 11889) is an international standard for a secure cryptoprocessor, a dedicated microcontroller designed to secure hardware through integrated cryptographic keys. The term can also refer to a chip conforming to the standard.",source:"@site/versioned_docs/version-Stable/tpm.md",sourceDirName:".",slug:"/tpm",permalink:"/tpm",draft:!1,tags:[],version:"Stable",frontMatter:{sidebar_label:"Trusted Platform Module (TPM)",title:""}},s={},c=[{value:"Add TPM module to virtual machine",id:"add-tpm-module-to-virtual-machine",level:2},{value:"Create Virtual Machine",id:"create-virtual-machine",level:3},{value:"Verify and edit hardware module list",id:"verify-and-edit-hardware-module-list",level:3},{value:"Add TPM module to VM",id:"add-tpm-module-to-vm",level:3},{value:"Finish VM configuration",id:"finish-vm-configuration",level:3},{value:"Add TPM emulation to bare metal machine",id:"add-tpm-emulation-to-bare-metal-machine",level:2}],m=(u="CodeBlock",function(e){return console.warn("Component "+u+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var u;const p={toc:c},f="wrapper";function h(e){let{components:t,...i}=e;return(0,r.kt)(f,(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"trusted-platform-module-20-tpm"},"Trusted Platform Module 2.0 (TPM)"),(0,r.kt)("p",null,"Trusted Platform Module (TPM, also known as ISO/IEC 11889) is an international standard for a secure cryptoprocessor, a dedicated microcontroller designed to secure hardware through integrated cryptographic keys. The term can also refer to a chip conforming to the standard."),(0,r.kt)("h2",{id:"add-tpm-module-to-virtual-machine"},"Add TPM module to virtual machine"),(0,r.kt)("p",null,"Easy way to add TPM to virtual machine is to use Libvirt with Virt-manager"),(0,r.kt)("h3",{id:"create-virtual-machine"},"Create Virtual Machine"),(0,r.kt)("p",null,"After starting virt-manager create new virtual machine"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Create new VM",src:n(6063).Z,width:"786",height:"831"})),(0,r.kt)("h3",{id:"verify-and-edit-hardware-module-list"},"Verify and edit hardware module list"),(0,r.kt)("p",null,"On the hardware configuration screen, verify list of modules and click ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"Add Hardware"))," button"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Devices list",src:n(4087).Z,width:"1019",height:"845"})),(0,r.kt)("h3",{id:"add-tpm-module-to-vm"},"Add TPM module to VM"),(0,r.kt)("p",null,"From the list of emulated devices choose TPM module and add it to VM"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Add TPM module",src:n(5076).Z,width:"1017",height:"842"})),(0,r.kt)("h3",{id:"finish-vm-configuration"},"Finish VM configuration"),(0,r.kt)("p",null,"On the last screen verify once again if TPM module was added properly"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Verify TPM",src:n(2312).Z,width:"1018",height:"845"})),(0,r.kt)("h2",{id:"add-tpm-emulation-to-bare-metal-machine"},"Add TPM emulation to bare metal machine"),(0,r.kt)("p",null,"During applying ",(0,r.kt)("inlineCode",{parentName:"p"},"#!yaml MachineRegistration")," add following key to the yaml ",(0,r.kt)("inlineCode",{parentName:"p"},"config:elemental:registration:emulate-tpm: true")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If you plan to deploy more than 1 machine with TPM emulation, make sure to set ",(0,r.kt)("inlineCode",{parentName:"p"},"config:elemental:registration:emulated-tpm-seed: -1"),"\nso the seed used for the TPM emulation is randomized per machine. Otherwise, you will get the same TPM Hash for all deployed machines and only the last\none to be registered will be valid.")),(0,r.kt)(m,{language:"yaml",title:"registration-tpm.yaml",showLineNumbers:!0,mdxType:"CodeBlock"},o.Z))}h.isMDXComponent=!0},2957:(e,t,n)=>{n.d(t,{Z:()=>a});const a="apiVersion: elemental.cattle.io/v1beta1\nkind: MachineRegistration\nmetadata:\n  name: my-nodes\n  namespace: fleet-default\nspec:\n  config:\n    cloud-config:\n      users:\n        - name: root\n          passwd: root\n    elemental:\n      install:\n        reboot: true\n        device: /dev/sda\n        debug: true\n      registration:\n        emulate-tpm: true\n"},6063:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tpm1-7a68f095e057c5834efe61309decb43a.png"},4087:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tpm2-480a00b132fddce83ba3e85ac5c5969a.png"},5076:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tpm3-0a66311610b78cb9ad5c1e0a9506f18f.png"},2312:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tpm4-142e726b37fba5f4f9abb93cc957fb4a.png"}}]);