<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-architecture">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Elemental - Immutable Linux for Rancher</title><meta data-rh="true" property="og:title" content="Elemental - Immutable Linux for Rancher"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rancher.github.io/next/architecture"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="description" content="The Elemental stack can be divided in two main parts: the Elemental OS, an immutable and customizable OS which comprises the tools and the steps needed to prepare the Cloud Native OS image and perform the actual OS installation on the host, and the , that allows central management of the Elemental OS via Rancher, the Kubernetes way."><meta data-rh="true" property="og:description" content="The Elemental stack can be divided in two main parts: the Elemental OS, an immutable and customizable OS which comprises the tools and the steps needed to prepare the Cloud Native OS image and perform the actual OS installation on the host, and the , that allows central management of the Elemental OS via Rancher, the Kubernetes way."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rancher.github.io/next/architecture"><link data-rh="true" rel="alternate" href="https://rancher.github.io/next/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://rancher.github.io/next/architecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QLF01IU46G-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-57KS2MW"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-57KS2MW",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Elemental - Immutable Linux for Rancher" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.28eb29ea.css">
<link rel="preload" href="/assets/js/runtime~main.d14b8822.js" as="script">
<link rel="preload" href="/assets/js/main.8f8f1b98.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Elemental - Immutable Linux for Rancher" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Elemental - Immutable Linux for Rancher" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Elemental</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/next/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/next/">Next ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/next/architecture">Next ðŸš§</a></li><li><a class="dropdown__link" href="/architecture">1.2</a></li></ul></div><a href="https://github.com/rancher/elemental" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://rancher-users.slack.com/channels/elemental" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack Channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/next/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/next/quickstart-ui">Quickstarts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/quickstart-ui">Elemental the visual way</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/quickstart-cli">Elemental the command line way</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/next/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/installation">Install/Upgrade</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/cloud-config-reference">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/inventory-management">Operator</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/backup">Backup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/wifi">How to</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/next/troubleshooting-rancher-upgrades">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/next/release-notes">Release Notes</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Elemental - Immutable Linux for Rancher<!-- --> <b>Next ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/architecture">latest version</a></b> (<!-- -->1.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Architecture</h1><p>The Elemental stack can be divided in two main parts: the Elemental OS, an immutable and customizable OS which comprises the tools and the steps needed to prepare the Cloud Native OS image and perform the actual OS installation on the host, and the <span>Elemental Operator</span>, that allows central management of the Elemental OS via Rancher, the Kubernetes way.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-architecture"><img loading="lazy" alt="Elemental Architecture" src="/assets/images/elemental-arch-v1.3_nobg-cbe062db521c514fc332b92ff6e7f3d5.png" width="1501" height="1116" class="img_ev3q"><a href="#elemental-architecture" class="hash-link" aria-label="Direct link to elemental-architecture" title="Direct link to elemental-architecture">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-os">Elemental OS<a href="#elemental-os" class="hash-link" aria-label="Direct link to Elemental OS" title="Direct link to Elemental OS">â€‹</a></h2><p>In order to deploy the Elemental OS we need:</p><ul><li>an Elemental base OS image</li><li>an Elemental installation configuration</li><li>the <span>Elemental CLI</span> tool, which installs the Elemental OS image on the target host applying the Elemental installation configuration</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-os-image">Elemental OS image<a href="#elemental-os-image" class="hash-link" aria-label="Direct link to Elemental OS image" title="Direct link to Elemental OS image">â€‹</a></h3><p>The Elemental OS image is an OCI container image containing all the files that will make up the OS of the target host. It will contain not only all the desired binaries and libraries, but also the kernel and the boot files required by a linux system.
The <a href="https://rancher.github.io/elemental-toolkit">Elemental Toolkit</a> is at the core of the Elemental OS, enabling to boot and upgrade an OS from container images. It also provides a framework that allows to combine different packages to bake custom OS container images. For more information check the <a href="https://rancher.github.io/elemental-toolkit">Elemental Toolkit</a> project page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-installation-configuration">Elemental installation configuration<a href="#elemental-installation-configuration" class="hash-link" aria-label="Direct link to Elemental installation configuration" title="Direct link to Elemental installation configuration">â€‹</a></h3><p>In order to provision a machine with an Elemental OS image, installation configuration parameters are required: things such as the boot device, the root password, system configuration, users and custom files are things that should be provided aside from the Elemental OS image. All the data can be provided in a single .yaml file. More details can be found in the <a href="https://rancher.github.io/elemental-toolkit">Elemental Toolkit</a> documentation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-cli">Elemental CLI<a href="#elemental-cli" class="hash-link" aria-label="Direct link to Elemental CLI" title="Direct link to Elemental CLI">â€‹</a></h3><span>Elemental CLI</span> is the tool that allows to turn the Elemental OS image in a bootable and installed OS: it can generate an <span>Elemental ISO</span> image from the provided Elemental OS container image. The generated <span>Elemental ISO</span> image can be used to boot a virtual machine or a bare metal host and start the Elemental OS installation.<p>The <span>Elemental CLI</span> allows also to install the Elemental OS on the storage device of the live booted host, applying the provided Elemental installation configuration. For the list and syntax of the commands available in the <span>Elemental CLI</span>, check the <a href="https://github.com/rancher/elemental-cli">online documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vars-nameelemental_iso_name-"><span>Elemental ISO</span><a href="#vars-nameelemental_iso_name-" class="hash-link" aria-label="Direct link to vars-nameelemental_iso_name-" title="Direct link to vars-nameelemental_iso_name-">â€‹</a></h3><p>The <span>Elemental ISO</span> is a live ISO based on the Elemental OS (an Elemental live ISO).
It includes all the tools needed to perform a full node provisioning, from the OS to Kubernetes, including the <a href="#elemental-cli"><span>Elemental CLI</span></a> and the <a href="#elemental-register-client"><span>Elemental Register client</span></a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-operator">Elemental Operator<a href="#elemental-operator" class="hash-link" aria-label="Direct link to Elemental Operator" title="Direct link to Elemental Operator">â€‹</a></h2><p>The <span>Elemental Operator</span> is responsible for managing OS upgrades and a secure device inventory to assist
with zero touch provisioning.
It provides an <span>Elemental Operator</span> Helm Chart and an <span>Elemental Register client</span>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-operator-helm-chart">Elemental Operator Helm Chart<a href="#elemental-operator-helm-chart" class="hash-link" aria-label="Direct link to Elemental Operator Helm Chart" title="Direct link to Elemental Operator Helm Chart">â€‹</a></h3><p>The <span>Elemental Operator</span> Helm Chart must be installed on a Rancher Cluster. It enables new hosts to:</p><ul><li>register against the <span>Elemental Operator</span>.</li><li>retrieve the Elemental installation configuration (which is stored in custom Kubernetes resources) to start the Elemental OS installation.</li><li>download and install the <a href="https://github.com/rancher/system-agent">Rancher System Agent</a>, which enables Rancher to provision and manage K3s and RKE2 on the Elemental nodes.</li></ul><p>The <span>Elemental Operator</span> allows control of the Elemental Nodes by extending the Kubernetes APIs with a set of <em>elemental.cattle.io</em> <a href="https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/" target="_blank" rel="noopener noreferrer">Kubernetes CRDs</a>:</p><ul><li>MachineRegistration</li><li>MachineInventory</li><li>MachineInventorySelector</li><li>MachineInventorySelectorTemplate</li><li>ManagedOSImage</li><li>ManagedOSVersion</li><li>ManagedOSVersionChannel</li><li>SeedImage</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="machineregistration">MachineRegistration<a href="#machineregistration" class="hash-link" aria-label="Direct link to MachineRegistration" title="Direct link to MachineRegistration">â€‹</a></h4><p>The MachineRegistration includes the Elemental installation configuration (provided by the user) and a registration token (generated by the <span>Elemental Operator</span>), from which a registration URL is derived.</p><p>The registration URL is the way through which an host can access the <span>Elemental Operator</span> services, to kick off the Elemental provisioning process.</p><p>The MachineRegistration has a <code>Ready</code> condition which turns to true when the <span>Elemental Operator</span> has successfully generated the registration URL and an associated ServiceAccount. From this point on the target host can connect to the registration URL to kick off the provisioning process.</p><p>An HTTP GET request against the registration URL returns the <em>registration file</em>: a .yaml file containing the registration data (i.e., the <em>spec:config:elemental:registration</em> section only from the just created MachineRegistration).
The registration file contains all the required data to allow the target host to perform self registration and start the Elemental provisioning. See the <a href="#elemental-register-client"><span>Elemental Register client</span> section</a> for more info on the registration process and the <a href="/next/machineregistration-reference#configelementalregistration">config:elemental:registration section in the MachineRegistration reference</a> for more details on the available registration options.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="machineinventory">MachineInventory<a href="#machineinventory" class="hash-link" aria-label="Direct link to MachineInventory" title="Direct link to MachineInventory">â€‹</a></h4><p>When a new host registers successfully, the <span>Elemental Operator</span> creates a MachineInventory resource representing that particular host.
The MachineInventory stores the TPM hash of the tracked host, retrieved during the registration process, and allows to execute arbitrary commands (plans) on the machine.</p><p>A MachineInventory has two conditions:</p><ul><li><code>AdoptionReady</code>, which indicates the machine has been adopted by a selector to be part of a cluster.</li><li><code>Ready</code>, which indicates that the machine has been registered and provisioned with an Elemental OS.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="machineinventoryselector">MachineInventorySelector<a href="#machineinventoryselector" class="hash-link" aria-label="Direct link to MachineInventorySelector" title="Direct link to MachineInventorySelector">â€‹</a></h4><p>A MachineInventorySelector selects MachineInventories based on applied selectors (usually pattern matching on MachineInventory label values).</p><p>MachineInventorySelectors have two conditions:</p><ul><li><code>InventoryReady</code>, turns to true if the MachineInventorySelector has found a matching MachineInventory and has successfully set itself as the MachineInventory owner.</li><li><code>Ready</code>, tracks if the selector already adopted a machine and started the kubernetes provisioning process (node bootstrap).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="machineinventoryselectortemplate">MachineInventorySelectorTemplate<a href="#machineinventoryselectortemplate" class="hash-link" aria-label="Direct link to MachineInventorySelectorTemplate" title="Direct link to MachineInventorySelectorTemplate">â€‹</a></h4><p>The MachineInventorySelectorTemplate is a user defined resource that will be used as the blueprint to create the required MachineInventorySelectors: it includes the selector to identify the eligible MachineInventories.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="seedimage">SeedImage<a href="#seedimage" class="hash-link" aria-label="Direct link to SeedImage" title="Direct link to SeedImage">â€‹</a></h4><p>A SeedImage is a resource to handle the installation media creation. Includes the reference to the base installation system and a reference to the machine registration. It is used to create and serve installation ISOs including
the MachineRegistration metadata required for the machine registration. The installation media is created and being served in a devoted Pod.</p><p>SeedImage have two conditions:</p><ul><li><code>SeedImageReady</code>, tracks the status of the associated pod.</li><li><code>Ready</code>, tracks if all the SeedImage child resources have been successfully created.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-register-client">Elemental Register client<a href="#elemental-register-client" class="hash-link" aria-label="Direct link to Elemental Register client" title="Direct link to Elemental Register client">â€‹</a></h3><p>New hosts start the Elemental provisioning process through the <span>Elemental Register client</span>: this tool requires a valid elemental-operator registration URL as input (see the <a href="#machineregistration">MachineRegistration section</a>), and performs the following steps:</p><ul><li>setups a websocket connection to the registration URL</li><li>authenticates itself using the registration token and the onboard <a href="https://en.wikipedia.org/wiki/Trusted_Platform_Module" target="_blank" rel="noopener noreferrer">TPM (Trusted Platform Module)</a></li><li>sends <a href="/next/smbios">SMBIOS data</a> to the <span>Elemental Operator</span></li><li>retrieves the Elemental installation configuration</li><li>starts the <a href="#elemental-cli"><span>Elemental CLI</span></a> and performs the Elemental OS installation</li></ul><p><strong>Note</strong>
if no TPM 2.0 is available on the host, TPM can be emulated by software: see the <code>emulate-tpm</code> key in the <a href="/next/machineregistration-reference#configelementalregistration">config.elemental.register reference document</a>.</p><span>Elemental Operator</span> includes a Kubernetes operator installed in the management cluster and a client side installed in nodes, so they can self register into the management cluster. Once a node is registered the <span>Elemental Operator</span> will kick-start the OS installation and schedule the Kubernetes provisioning using the <a href="https://github.com/rancher/system-agent">Rancher System Agent</a>. Rancher System Agent is responsible for bootstrapping RKE2/k3s and Rancher from an OCI registry. This means an update of containerd, k3s, RKE2, or Rancher does not require an OS upgrade or node reboot.<hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="elemental-teal">Elemental Teal<a href="#elemental-teal" class="hash-link" aria-label="Direct link to Elemental Teal" title="Direct link to Elemental Teal">â€‹</a></h2><p>Elemental Teal is Elemental OS built on top of SUSE Linux Enterprise (SLE) Micro for Rancher using the Elemental stack.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/next/quickstart-cli"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Elemental the command line way</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/next/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#elemental-architecture" class="table-of-contents__link toc-highlight">Elemental Architecture</a></li><li><a href="#elemental-os" class="table-of-contents__link toc-highlight">Elemental OS</a><ul><li><a href="#elemental-os-image" class="table-of-contents__link toc-highlight">Elemental OS image</a></li><li><a href="#elemental-installation-configuration" class="table-of-contents__link toc-highlight">Elemental installation configuration</a></li><li><a href="#elemental-cli" class="table-of-contents__link toc-highlight">Elemental CLI</a></li><li><a href="#vars-nameelemental_iso_name-" class="table-of-contents__link toc-highlight"><vars name="elemental_iso_name"></a></li></ul></li><li><a href="#elemental-operator" class="table-of-contents__link toc-highlight">Elemental Operator</a><ul><li><a href="#elemental-operator-helm-chart" class="table-of-contents__link toc-highlight">Elemental Operator Helm Chart</a></li><li><a href="#elemental-register-client" class="table-of-contents__link toc-highlight">Elemental Register client</a></li></ul></li><li><a href="#elemental-teal" class="table-of-contents__link toc-highlight">Elemental Teal</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Elemental</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://rancher-users.slack.com/channels/elemental" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack #elemental<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://rancher.github.io/elemental-toolkit" target="_blank" rel="noopener noreferrer" class="footer__link-item">Elemental Toolkit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rancher/elemental-operator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Elemental Operator<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rancher/elemental-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item">Elemental CLI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rancher/system-agent" target="_blank" rel="noopener noreferrer" class="footer__link-item">Rancher System Agent<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 SUSE Rancher. All Rights Reserved</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d14b8822.js"></script>
<script src="/assets/js/main.8f8f1b98.js"></script>
</body>
</html>